{"ast":null,"code":"import axios from 'axios';\nimport adapter from \"axios/lib/adapters/http\";\nimport { Product } from './product';\naxios.defaults.adapter = adapter;\nexport class API {\n  constructor(url) {\n    if (url === undefined || url === \"\") {\n      url = process.env.REACT_APP_API_BASE_URL;\n    }\n\n    if (url.endsWith(\"/\")) {\n      url = url.substr(0, url.length - 1);\n    }\n\n    this.url = url;\n  }\n\n  withPath(path) {\n    if (!path.startsWith(\"/\")) {\n      path = \"/\" + path;\n    }\n\n    return `${this.url}${path}`;\n  }\n\n  generateAuthToken() {\n    return \"Bearer \" + new Date().toISOString();\n  }\n\n  async getAllProducts() {\n    return axios.get(this.withPath(\"/products\"), {\n      headers: {\n        \"Authorization\": this.generateAuthToken()\n      }\n    }).then(r => r.data.map(p => new Product(p)));\n  }\n\n  async getProduct(id) {\n    return axios.get(this.withPath(\"/product/\" + id), {\n      headers: {\n        \"Authorization\": this.generateAuthToken()\n      }\n    }).then(r => new Product(r.data));\n  }\n\n}\nexport default new API(process.env.REACT_APP_API_BASE_URL);","map":{"version":3,"sources":["/Users/admin/Working/Evizi/BStock/3mp-demo/example-consumer1/src/api.js"],"names":["axios","adapter","Product","defaults","API","constructor","url","undefined","process","env","REACT_APP_API_BASE_URL","endsWith","substr","length","withPath","path","startsWith","generateAuthToken","Date","toISOString","getAllProducts","get","headers","then","r","data","map","p","getProduct","id"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,yBAApB;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEAF,KAAK,CAACG,QAAN,CAAeF,OAAf,GAAyBA,OAAzB;AAEA,OAAO,MAAMG,GAAN,CAAU;AACfC,EAAAA,WAAW,CAACC,GAAD,EAAM;AACf,QAAIA,GAAG,KAAKC,SAAR,IAAqBD,GAAG,KAAK,EAAjC,EAAqC;AACnCA,MAAAA,GAAG,GAAGE,OAAO,CAACC,GAAR,CAAYC,sBAAlB;AACD;;AACD,QAAIJ,GAAG,CAACK,QAAJ,CAAa,GAAb,CAAJ,EAAuB;AACrBL,MAAAA,GAAG,GAAGA,GAAG,CAACM,MAAJ,CAAW,CAAX,EAAcN,GAAG,CAACO,MAAJ,GAAa,CAA3B,CAAN;AACD;;AACD,SAAKP,GAAL,GAAWA,GAAX;AACD;;AAEDQ,EAAAA,QAAQ,CAACC,IAAD,EAAO;AACb,QAAI,CAACA,IAAI,CAACC,UAAL,CAAgB,GAAhB,CAAL,EAA2B;AACzBD,MAAAA,IAAI,GAAG,MAAMA,IAAb;AACD;;AACD,WAAQ,GAAE,KAAKT,GAAI,GAAES,IAAK,EAA1B;AACD;;AAEDE,EAAAA,iBAAiB,GAAG;AAClB,WAAO,YAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAnB;AACD;;AAEmB,QAAdC,cAAc,GAAG;AACrB,WAAOpB,KAAK,CAACqB,GAAN,CAAU,KAAKP,QAAL,CAAc,WAAd,CAAV,EAAsC;AAC3CQ,MAAAA,OAAO,EAAE;AACP,yBAAiB,KAAKL,iBAAL;AADV;AADkC,KAAtC,EAKNM,IALM,CAKDC,CAAC,IAAIA,CAAC,CAACC,IAAF,CAAOC,GAAP,CAAWC,CAAC,IAAI,IAAIzB,OAAJ,CAAYyB,CAAZ,CAAhB,CALJ,CAAP;AAMD;;AAEe,QAAVC,UAAU,CAACC,EAAD,EAAK;AACnB,WAAO7B,KAAK,CAACqB,GAAN,CAAU,KAAKP,QAAL,CAAc,cAAce,EAA5B,CAAV,EAA2C;AAChDP,MAAAA,OAAO,EAAE;AACP,yBAAiB,KAAKL,iBAAL;AADV;AADuC,KAA3C,EAKNM,IALM,CAKDC,CAAC,IAAI,IAAItB,OAAJ,CAAYsB,CAAC,CAACC,IAAd,CALJ,CAAP;AAMD;;AAtCc;AAyCjB,eAAe,IAAIrB,GAAJ,CAAQI,OAAO,CAACC,GAAR,CAAYC,sBAApB,CAAf","sourcesContent":["import axios from 'axios';\nimport adapter from \"axios/lib/adapters/http\";\nimport { Product } from './product';\n\naxios.defaults.adapter = adapter;\n\nexport class API {\n  constructor(url) {\n    if (url === undefined || url === \"\") {\n      url = process.env.REACT_APP_API_BASE_URL;\n    }\n    if (url.endsWith(\"/\")) {\n      url = url.substr(0, url.length - 1)\n    }\n    this.url = url\n  }\n\n  withPath(path) {\n    if (!path.startsWith(\"/\")) {\n      path = \"/\" + path\n    }\n    return `${this.url}${path}`\n  }\n\n  generateAuthToken() {\n    return \"Bearer \" + new Date().toISOString()\n  }\n\n  async getAllProducts() {\n    return axios.get(this.withPath(\"/products\"), {\n      headers: {\n        \"Authorization\": this.generateAuthToken()\n      }\n    })\n    .then(r => r.data.map(p => new Product(p)));\n  }\n\n  async getProduct(id) {\n    return axios.get(this.withPath(\"/product/\" + id), {\n      headers: {\n        \"Authorization\": this.generateAuthToken()\n      }\n    })\n    .then(r => new Product(r.data));\n  }\n}\n\nexport default new API(process.env.REACT_APP_API_BASE_URL);"]},"metadata":{},"sourceType":"module"}